#
# W7 Embedded Linux 교육 요약
   - 이 문서는 W7 Linux system programming 7주차 교육과정에 대한 정리한 문서 입니다.
 ## 0. 목차 및
   1. C언어 코드의 실행과 런타임
   2. 리눅스 부팅
   3. vim에디터
   4. 
   5. 
   6. 
 #
 ## prolog
   - 효율성 높은 학습을 위해서 리눅스 시스템 프로그래밍 하는 동안에 리눅스마스터를 공부한다 -> 주중에 학습하는것 복습하고 내것으로 익히는데도 벅차서 실패함
   - sudo su/sudo -s : 루트 계정으로 전환
   - ifconfig eth8 192.168.0.2 : 네트워크 어댑터를 지정 IP주소로 변경
   - SAMBA 설치하여 Host에서 Target에 파일 전송 손쉽게 하기
     1. SAMBA 설치
     2. ip-addr/root 네트워크 드라이브 추가
     3. root/home/(accname) 으로 학습용 파일 및 교보재 이동
     4. tar -xzf (filename) : tar파일 풀어놓기
   - 환경변수 : echo @path
     - 리눅스 쉘 환경과 프로그래밍 소개
   - C 표준 라이브러리 소개
     - assert.h, ctype.h, errno.h, float.h .... 많음
     - 위키피디아 C 표준라이브러리 문서 참조 [참조링크](https://en.wikipedia.org/wiki/C_standard_library)
   - makefile에 관하여 학습
   
 #
 ## Day1
   - What is system call is? in Linux system : System call is APP(user)의 권한이 모자란 경우 OS(시스템 혹은 커널에게 동작수행을 요청하는것)
   - Startup sequence : main() 함수의 Entry에 대하여 : 디스크에 존재하던 프로그램이 실행되어 프로세스가 되기 위해서는 세가지 메모리 세그멘테이션을 복사해야 하는데, .text, .data, .bss 영역 세가지 이다.
   - 스텍은바닥부터 힙은 천장부터 잡혀간다.
   - 실행파일은 두가지로 분류가 된다. 디버깅 가능 실행파일: ELF, 디버깅 불가능 실행파일 : Bin
   - 임베디드 시스템(ARM에서) 리눅스 부팅을 위해서 기존 NOR 플래쉬가 필요하던것을 개선하여 NAND와 DDRAM 만으로 부팅할 수 있게 시스템을 구축 하였고(MDS2450보드에서), 이를위해 0x000~번지에는 iROM이 존재한다.
   - 현용 system NAND에서 리눅스 커널부팅을 위해서는 크게 3가지가 필요하다
     1. U-Boot
     2. zImage
     3. root filesystem
   - 기본적으로 Nano , vi 에디터는 대부분의 임베디드를 포함한 리눅스배포판에서 지원하므로 해당 두가지 툴은 필수적으로 익혀두자
   - vi(vim) 에디터에 관하여
     - 화살표 이동 명령어 4종
       1. h : 좌
       2. j : 위
       3. k : 아래
       4. l : 우
     - 단어단위 이동 명령어 3종
       1. w : 다음단어 첫문자
       2. e : 다음단어 마지막문자
       3. b : 이전단어 첫문자
     - 줄단위 명령어이동 
       1. f -> e : 줄 내 가장빠른 e 로 이동
       2. f -> x : 줄 내 가장빠른 x 로 이동
     - 삭제 명령어 4종
       1. x : 한문자 삭제
       2. dd : 한줄 삭제
       3. dw : 한단어 삭제
     - 되돌리기
       1. u : 변경 내용 되돌리기
   - 추가로 공부할것
     1. 정규 표현식
     2. SED
     3. make파일
     4. ARM 어셈블리어
   - ARM 표준 라이브러리 -> 매우많음, 다 알기는 힘들고 자신이 필요할 때마다 검색해서 찾아 쓰는 능력이 필요함.
   - make : 빌드 자동화 툴
   - 시스템 콜 : 하드웨어 접근과 같은 커널권한이 필요한 작업을 유저어플리케이션에서 수행할 때, 커널에게 요청하기 위해서 필요하다.
      - File open(저수준)이 바로 시스템 콜 함수이다.
 #
 ## Day2
   - 리눅스에 존재하는 3가지 라이브러리 : 정적, 동적, 공유 라이브러리
   - 각 라이브러리 별 특징 및 구분점 소개
     1. 정적 : .a를 확장자로 가짐, 컴파일시 적재되므로 유연성이 떨어지며, 바이너리 크기가 커짐
     2. 동적 : 프로그램에 탑재되어있지 않고, 실행되다가 필요시 적재, 플러그인 모듈 구현에 적합
     3. 공유 : 프로그램이 시작될 때 적재, 어려 파일이 동일한 라이브러리를 공유하므로 메모리를 아낄 수 있다.
   - 리눅스의 라이브러리들은 관용적 접미사 lib를 붙인다.
   - 정적 라이브러리는 링크 단계에서 연결된다.
     - 만약 링크에 실패하는 경우 링커에서 에러를 발생시키며, 내용은 undefined reference to~ 의 에러가 발생한다.
   - 응용 프로그램 빌드 
   ```shell
    gcc -c mylib.a mylib.o
    ar rc mylib.a mylib.o
    gcc -c main.c
    fcc -o main main.c -L ./ mylib.a
   ```
   - 공유 라이브러리 : 정적라이브러리의 리던던시(redundency) 문제를 해결하기 위해서 만들어짐
   - 리던던시란, 여러개의 프로그램이 동작할때, 동일한 내용의 코드를 여기저기서 중복되게 로드하여 쓸때 발생하는 메모리의 낭비를 의미합니다.
   - 공유 라이브러리 활용시 -ldl 옵션을 사용하여 컴파일 해야 합니다.
 #
 ## Day3 - FILE
   - Everything is file : 유닉스(리눅스) 에서는 모든것을 파일로 취급한다
   - 네트워크 카드, 사운드, 키보드 모니터를 포함한 모든 하드웨어 또한 파일의 형태로 다룬다.
   - 파일 Open, Read, Write, Close 4가지의 오퍼레이션(동작함수)가 존재
   - 파일형태로 관리하는것은 모두 위 4가지의 조합으로 핸들링함.
   - File Operations : 
   - 요건 몰랏지? 파일로 관리하는 것들 : 소켓, IPC, 하드웨어 장치(GPIO), 파이프
   - File open(저수준)은 시스템 콜 함수이다 
     - 시스템 콜 : 하드웨어 접근과 같은 커널권한이 필요한 작업을 유저어플리케이션에서 수행할 때, 커널에게 요청하기 위해서 필요하다.
   - file discriptor : 파일 open 의 리턴 값, 프로세스를 새로이실행할 때 마다 기본 자동적으로 3개씩 생성됨 (0,1,2)
     - 0 : std in
     - 1 : std out
     - 2 : std err
   - file open read/write에 관한 기본 예제 진행
   - fsync : Data와 MetaData를 동기화 함
     - 동기화의 대상은 메모리-디스크(스토리지)간에 동기화를 의미함
   - Direct I/O
      I/O 퍼포먼스 향상을 위해서, 사용자공간과 I/O버퍼를 직접 연결하는 기법 
   - 파일의 본질은 i-node
